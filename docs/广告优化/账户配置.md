# 账户配置

您需要填写以下参数，其中，orgId为账号ID，货币类型与Search Ads保持一致，三个id以及两个密钥请参考以下步骤。

![选择对象](/images/62.png)

## 邀请用户

帐户管理员使用以下流程邀请具有 API 权限的用户：

1.登录Apple Search Ads，找到「设置」>「用户管理」
![选择对象](/images/63.png)
2.在“用户管理”中，单击“邀请用户”邀请用户加入您的 Apple Search Ads 组织。
![选择对象](/images/64.png)
3.在“用户详细信息”部分，输入用户的名字、姓氏和 Apple ID。
4.在用户访问和角色部分，选择 API 账号经理。
![选择对象](/images/65.png)
5.单击发送邀请。受邀用户会收到一封带有安全代码的电子邮件。用户登录电子邮件中的安全 Apple URL 并输入提供的代码，这将激活用户的帐户。


## 生成服务账号私钥EC-key格式

API 用户需要创建私钥。如果您使用的是 MacOS 或类 UNIX 操作系统，则 OpenSSL 可以在本机运行。如果您使用的是 Windows 平台，则需要下载OpenSSL。

```bash
openssl ecparam -genkey -name prime256v1 -noout -out file.pem
```

生成的文件类似于以下示例：file.pem

```
-----BEGIN EC PRIVATE KEY-----MHcCAQEEIKtnxllRY8nbndBQwT9we4pEULtjpW605iwvzLlKcBq4oAoGCCqGSM49AwEHoUQDQgAEY58v74eQFyLtu5rtCpeU4NggVSUQSOcHhN744t0gWGc/xXkCSuszLaZriCQnnqq4Vx+IscLFcrjBj+ulZzKlUQ== -----END EC PRIVATE KEY-----
```

将 EC-key 转换为持久化私钥：

```bash
openssl pkcs8 -topk8 -inform pem -in file.pem -outform pem -nocrypt -out private-key.pem
```

从私钥提取公钥：

```bash
openssl ec -in private-key.pem -pubout -out public-key.pem
```

## 转换持久化私钥

使用以下命令将 EC-key 格式的私钥转换为持久化私钥。

```bash
openssl pkcs8 -topk8 -inform pem -in file.pem -outform pem -nocrypt -out private-key.pem
```

生成的文件类似于以下示例：private-key.pem

```
----BEGIN PRIVATE KEY----- MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQgDYcssfAnaUO/RPnZ /RzYkklU++F70hRhut5Lu0nyPOuhRANCAARo9pYudy9iCmjNwYedOxJKZMmUWJ2g nf6jsQ/eJvWPs00KmMkJwiPJAev6jCePC3c09yvZ0mzxZssykUmjWHqD -----END PRIVATE KEY-----
```

在文本编辑器中打开文件并复制私钥，包括开始和结束行。

## 提取服务账号公钥

使用以下命令从上述生成的私钥中提取公钥：

```bash
openssl ec -in private-key.pem -pubout -out public-key.pem
```

生成的文件类似于以下示例：public-key.pem

```
-----BEGIN PUBLIC KEY----- MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEaPaWLncvYgpozcGHnTsSSmTJlFid oJ3+o7EP3ib1j7NNCpjJCcIjyQHr+ownjwt3NPcr2dJs8WbLMpFJo1h6gw== -----END PUBLIC KEY-----
```

在文本编辑器中打开文件并复制公钥，包括开始和结束行。

## 上传公钥获得clientId、teamId、keyId

1.在 Apple Search Ads中，选择「设置」>「API」。将在上一节中创建的密钥粘贴到公钥字段中，并选择保存。
![选择对象](/images/66.png)

2.保存完成后，一组凭据显示为公钥字段上方的代码块。

```
clientId SEARCHADS.aeb3ef5f-0c5a-4f2a-99c8-fca83f25a9
```

```
teamId SEARCHADS.aeb3ef5f-0c5a-4f2a-99c8-fca83f25a9
```

```
keyId a273d0d3-4d9e-458c-a173-0db8619ca7d7
```

3.将以上步骤获得的 Private-key.pem 作为服务账号私钥，public-key.pem 作为服务账号公钥，以及上传公钥后获得的三个ID：clientId、teamId、keyId填写进去，最后选择保存，配置完成。
